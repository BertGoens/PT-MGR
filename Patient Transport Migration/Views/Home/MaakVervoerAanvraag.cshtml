@model Patient_Transport_Migration.Models.VM.MaakVervoerAanvraag.AanvraagTypesVM

@{
    ViewBag.Title = "Maak Vervoer Aanvraag";
}

<div class="content-container">
    <div class="content-left">
        <div>
            <label for="dllRequestTypes">Selecteer een aanvraag</label>
            @Html.DropDownListFor(m => m.SelectedAanvraagTypeId, new SelectList(Model.AanvraagTypeLijst, "Value", "Text"), "Aanvragen",
    htmlAttributes: new { id = "dllRequestTypes", onchange = "renderAanvraag(this.value)" })
        </div>
    </div>

    <div class="content-right">
        <div id="dvLoaderAanvraagDetails" class="ajax-loader"></div>
        <div id="dvAanvraagDetails"></div>
    </div>
</div>


<script>
    $(new function () {
        $dvContent = $("#dvAanvraagDetails");
        $dvContentRight = $(".content-right");
        $dvContentRight.hide();
    });

    function renderAanvraag(type) {
        if (type == "") {
            $dvContent.html('');
            $dvContentRight.hide();
        } else {
            var $ajaxLoader = $('#dvLoaderAanvraagDetails');
            $ajaxLoader.show();
            $.ajax({
                type: "GET",
                url: "GetMaakVervoerAanvraag_AanvraagDetails?aanvraagTypeId=" + type,
                beforeSend: function () {
                    $dvContent.html('');
                },
                success: function (result) {                 
                    $dvContent.html(result);
                },
                error: function (error) {
                    $dvContent.html("<p>Probleem met laden! <br />" + error + "</p>");
                },
                complete: function () {
                    $ajaxLoader.hide();
                    $dvContentRight.show();
                }
            });
        }
    }
</script>
