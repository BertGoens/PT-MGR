@model Patient_Transport_Migration.Models.VM.PatientInfoVM

<div style="overflow-x:auto;">
    @if (Model.PatientMedischeAanvragenVM != null) {
        <table>
            <tr>
                <th>Onderzoek</th>
                <th>In orde</th>
                <th>Link</th>
            </tr>
            @if (Model.PatientMedischeAanvragenVM.PatientAanvragen != null) {
                foreach (var aanvraag in Model.PatientMedischeAanvragenVM.PatientAanvragen) {
                    <tr>
                        <td>@aanvraag.AanvraagType.Omschrijving</td>
                        <td>@if (@aanvraag.AanvraagStatus.IsLaatsteStap) { @Html.Raw("Ja") } else { @Html.Raw("Nee") }</td>
                        <!--TODO! Add Controller Support (Read / Edit) & Edit this link -->
                        <td>Html.ActionLink("Open", "GetaanvraagDetails", @aanvraag.Id)</td>
                    </tr>
                }
            }
        </table>
        <br />
    } else {
        <br />
        <p>Geen medische aanvragen voor deze patiënt gevonden.</p>
    }

    <!--TODO! Add Support om via link Nieuwe Aanvraag te maken voor geselecteerde patient -->
    <button id="btnLoadAanvraagTypes">Nieuwe aanvraag</button>

    <div id="dvAanvraagTypes"></div>
</div>

<script>
    $("#btnLoadAanvraagTypes").click(function () {
        $.ajax({
            type: "GET",
            url: "GetAanvraagTypes",
            success: function (result) {
                $("#dvAanvraagTypes").html(result);
            }
        });
    });
</script>